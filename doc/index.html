<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="../src/jquery.vmodel.js"></script>
    <script src="index.js"></script>
</head>
<body>
    <header>
        <div class="logo">
            Vmodel.js
        </div>
        <div class="logobar">
            <pre>$(".datalist").vmodel("--hello", true, function (){
    var vs = this;
    this.autoload = ['say'];
    this.say = function (){
        console.log('Hello World');
    }
});</pre>  
    </header>
    
    <ul class="dir">
        
    </ul>

    <div class="container">
            <h1>基本用法</h1>
            <ul>
                <li>
                    <a href="01.html">主動觸發：觸發自行指定的方法</a>
                </li>
                <li>
                    <a href="02.html">被動觸發：須要渲染模組的時候再觸發</a>
                </li>
                <li><a href="03.html">外部呼叫：如同呼叫 class 內的 function </a></li>

            </ul>

            <h1>進階用法</h1>
            <ul>
                <li><a href="04.html">根節點綁定：讓你更容易歸類</a></li>
                <li><a href="05.html">根節點綁定：多個模組的應用</a></li>
                <li><a href="06.html">模版應用</a></li>
            </ul>


            <h1>
                方法說明
            </h1>

            <h2>$(selector).vmodel([name], [isautoload], function)</h2>
            <ul>
                <li>selector：根節點的選擇器。也就是你的模組最外層，可以是window、document、標籤、class、id......。 如果你的模組是一個工具類型，可以綁定為 window 。</li>
                <li>name: string 自訂的模組名稱。若使用前綴字元 『--』 可以方便搜尋時定位，但實際的模組名稱仍然不包含 『--』。</li>
                <li>isautoload： bool 是否觸發自動讀取</li>
                <li>function： function 執行的程序。如果以 『this.function』，那麼這個方法屬於公開，可以被 $.vmodel.get() 呼叫。 如果不使用 『this.』 那麼將會成為私有方法，而且不可以使用 『vs.』 </li>
            </ul>
            <pre>
$(".content").vmodel(function (){
    //...
});
            </pre>
            <p>或</p>
            <pre>
$(".content").vmodel("my", function (){
    //...
});
            </pre>
            <p>或</p>
            <pre>
$(".content").vmodel("my", true, function (){
    //...
}); 
$(".content").vmodel("--my", false, function (){
    //...
}); 
$(".content").vmodel("--my", true, function (){
    //...
}); 
            </pre>
            
            <p>下面舉例公開與私有</p>
            <pre>
$(".content").vmodel("--my", true, function (){
    
    // 這是私有參數
    var vs = this;
    
    // 這是公開參數
    this.name;

    var name = function (){
        // 私有的，這裡不可以使用 vs (或 this)
    }

    this.say = function (){
        // 公開的
    }

});    
            </pre>
            <p>如果有多個模組，可以用『/』分類</p>
            <pre>
$(".content").vmodel("--my/input", true, function (){
    //....
});
$(".content").vmodel("--my/output", true, function (){
    //....
});
            </pre>

            <h2>
                vs
            </h2>
            <p>
                等同 this。範例中使用 var vs = this;
            </p>
            <pre>
$(".content").vmodel("--my", true, function (){
    var vs = this;
})
            </pre>

            <h2>
                vs.root
            </h2>
            <p>
                如果 $(".content").vmodel() 就等同 $(".content")
            </p>
            <pre>
$(".content").vmodel("--my", true, function (){
    var vs = this;
    this.autoload = ['say'];
    this.say = function (){
        console.log(vs.root); // $(".content")
    }
})
            </pre>

            <h2>
                vs.selector
            </h2>
            <p>
                如果 $(".content").vmodel() 就等同 .content
            </p>
            <pre>
$(".content").vmodel("--my", true, function (){
    var vs = this;
    this.autoload = ['say'];
    this.say = function (){
        console.log(vs.selector); // .content
    }
})
            </pre>

            <h2>
                autoload
            </h2>
            <ul>
                <li>autoload： array | function</li>
            </ul>
            <p>
                自動批次讀取內部的方法。若要預先觸發程序，可以寫成 function。
                若是 array 
            </p>
            <pre>
$(".content").vmodel("--my", true, function (){
    var vs = this;
    this.autoload = ['say'];
    this.say = function (){
        //...
    }
});
            </pre>
            <p>若是 function, 可選擇是否在最後返回陣列</p>
            <pre>
$(".content").vmodel("--my", true, function (){
    var vs = this;
    this.autoload = function (){
        //...
        return ['say'];
    };
    this.say = function (){
        //...
    }
});
            </pre>

            <h2>
                struct(name, [status])
            </h2>
            <ul>
                <li>name： string | array 指地內部的方法名稱。可以使用字串或陣列。</li>
                <li>status： bool 預設 true，false 代表該方法未完成。</li>
            </ul>
            <p>
                配合使用視覺化屬性的時候，需要透過該方法，告訴 vmodel 哪個方法的建構已經完成。通常使用在 function 的結尾。例如這裡我們先定義好模組：
            </p>
            <pre>
$(".content").vmodel("--my", false, function (){
    var vs = this;
    this.autoload = ['say']
    this.say = function (){
        //...
        vs.struct('say');
    }
});
            </pre>
            <p>
                接著透過 $.vmodel.get() 啟用 autoload ，並設定第三個參數。
            </p>
            <pre>
$.vmodel.get('my', true, function (){
    console.log("compile");
})
            </pre>
            

            <h2>
                $.vmodel.history(name)
            </h2>
            <ul>
                <li>name： string 倉儲名稱</li>
            </ul>
            <p>
                取得視覺化的屬性物件。如果找不到，會返回 false。務必將取得的倉儲對象，設定 $.vmodel.get() 第三個參數。
            </p>
            <pre>
$.vmodel.get('my', true, true);
var obj = $.vmodel.history('my');
            </pre>


            <h2>
                $.vmodel.get([name], [autoload], [listen])
            </h2>
            <ul>
                <li>name： string 要讀取的模組名稱。若在定義時使用前綴字元『--』命名，在這裡記得不要寫；若為空，可返回整個倉儲。</li>
                <li>autoload： bool 是否觸發內部的 autoload。預設 false。</li>
                <li>listen： bool | function(storage) 監聽 autoload 中的每個方法，都被 vs.struct() 指定狀態為true 以後，所觸發的 callback。若指定為 true，仍然會啟用監聽完成後的視覺化屬性。</li>
            </ul>
            <p>
                可在任何時候，啟用 vmodel 自動讀取(初始化)，或是呼叫 vmodel 模組內的某個方法。
            </p>
            <pre>
$.vmodel.get("my", true);
$.vmodel.get("my", true, true);
$.vmodel.get("my", true, function (storage){
    //...
});
            </pre>


            <h2>
                $.vmodel.end([storage], [callback])
            </h2>
            <ul>
                <li>storage： string | array 指定要完成的倉儲名稱。若不指定，則當所有倉儲完成後，觸發 callback </li>
                <li>callback： function 等到倉儲完成後所觸發的回調函式。</li>
            </ul>
            <p>
                監控多組倉儲完成視覺化後，觸發函式。若要使用該方法，務必啟用 $.vmodel.get() 第三個參數為 true 或 function。 
            </p>
            <pre>
$.vmodel.end(function (){
    //...
})
$.vmodel.end(['md_01', 'md_02'], function (){
    //...
})
            </pre>

            <h2>
                $.vmodel.delete([name])
            </h2>
            <ul>
                <li>name: string 要刪除的模組名稱。若不指定，會刪除所有倉儲。</li>
            </ul>
            <p>
                刪除指定的倉儲。
            </p>
            <pre>
$.vmodel.delete();
$.vmodel.delete('my');
            </pre>
            
    </div>

</body>
</html>
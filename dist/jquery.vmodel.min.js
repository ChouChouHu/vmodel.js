!function(t){var e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e){var o,r;o=jQuery,r={},o.vmodel={},o.vmodel.api=new function(){this.remove_sign=function(t){return"--"==t.substring(0,2)?t.substring(2):t},this.isallow_jqver=function(t){return 1==t?"Vmodel.js "+o.vmodel.version()+" 須要使用大於 jQuery 3.0.0 的版本":3==jQuery.fn.jquery.charAt(0)},this.check_input_param=function(t){if(!t.selector)throw"須要指定選擇器";if(!t.model_name)throw"須要替模型命名";if(void 0===t.isautoload)throw"須要指定是否啟用";if(!t.method)throw"須要指定方法"},this.vmodel_param_match=function(t,e,r,n){return[t,this.remove_sign(e),r,"object"===o.type(n)?n:new n]},this.obj_sort=function(t){var e=[],r=0;o.each(t,function(t,o){e[r++]=t}),e.sort();var n={};return o.each(e,function(e,o){n[o]=t[o]}),n},this.each_autoload=function(t,e){return!!t&&(o.each(t,function(t,r){if("function"!=o.type(e[r]))return local.msg_error(r,"不存在。"),!1;e[r]()}),!0)},this.is_trigger_autoload=function(t,e){try{if(!e)throw"須要指定方法名稱陣列";if("array"!=o.type(e))throw"is_trigger_autoload() 代入的方法名稱必須要是陣列";return o.vmodel.api.each_autoload(e,t),!0}catch(t){return console.log(t),!1}},this.get_autoload_funame=function(t){var e=[],r=o.type(t.autoload);try{if("array"==r)e=t.autoload;else{if("function"!=r)throw t.vname+" 的 autoload 須要是陣列或 function。";if(res=t.autoload(),"array"!=o.type(res))throw t.vname+" 的 get_autoload_funame() 最終需要得到的型態應該是陣列。";e=res}return e}catch(t){return console.log(t),!1}}},o.vmodel.version=function(){return"1.6.2"},o.vmodel.end=function(t,e){this.param_match=function(t,e){var r=[];if("function"==o.type(t))r=[o.vmodel.get(),t];else{var n={};o.each(t,function(t,e){n[e]=o.vmodel.get(e)}),r=[n,e]}return r};var r=this.param_match(t,e),n=r[0],a=r[1];t=e=null;var i=setInterval(function(){var t=!0;o.each(n,function(e,r){if(0==o.vmodel.history(r.vname))return t=!1,!0;t=!0}),t&&(a(n),clearInterval(i))},0)},o.vmodel.history=function(t){var e=!1,r=o.vmodel.get(t).root.attr("data-vmodel-history");if(!r)return!1;var n=o.parseJSON(r);return o.each(n,function(o,r){return r.vname!=t||(e=r,!1)}),e},o.vmodel.get=function(t,e,n){var a=this;this.chk_trigger_callback=function(t){var e=!0;return o.each(t.fun_struct,function(t,o){if(0==o)return e=!1,!1}),0!=e},this.display_attr=function(t,e){var r=new Date,n=[{vname:t,status:!0,timestamp:Date.parse(r)+"."+r.getMilliseconds()}],a=e.root.attr("data-vmodel-history");if(a){var i=o.parseJSON(a);i.push(n[0]),n=i}var u=JSON.stringify(n);e.root.attr("data-vmodel-history",u)},this.param_match=function(t,e,r){var n=[],a=o.type(t);return t?"string"==a&&(n=[t,e,r]):n=[t,null,null],n};var i=a.param_match(t,e,n),u=(t=i[0],i[1]),l=i[2];if(i=e=n=null,!t)return o.vmodel.api.obj_sort(r);var c=r[t];if(!c)return console.log("呼叫的倉儲名稱 "+t+" 不存在。"),!1;if("boolean"==o.type(u)&&1==u){var s=o.vmodel.api.get_autoload_funame(c),f=(o.vmodel.api.is_trigger_autoload(c,s),o.type(l));if("function"==f||"boolean"==f&&1==l){"function"==f&&(c.vmodel_get_callback=function(){l(c)});var d=setInterval(function(){if(1==a.chk_trigger_callback(c)){if(clearInterval(d),a.display_attr(t,c),"boolean"==f)return!0;c.vmodel_get_callback()}},20);return!0}}return r[t]},o.vmodel.delete=function(t){return t||""==t?r[t]&&delete r[t]:r={},this},o.vmodel.create=function(t){var e=this,n=t.selector;return this.msg_error=function(t,e){console.log("錯誤：『"+n+"』呼叫的 function 『"+t+"』："+e)},this.define_autoload_struct=function(t,e){o.each(e,function(e,o){t.fun_struct[o]=!1})},this.ext_expend=function(t,e){var r=null!=e?e:null;return o.extend(t,{vname:r,selector:n,root:o(n),fun_struct:{},struct:function(e,r){if("boolean"==o.type(r)||r||(r=!0),"string"==o.type(e)){if("boolean"!=o.type(t.fun_struct[e]))return console.log("找不到名稱為 "+e+"的建構狀態"),!1;t.fun_struct[e]=r}else{if("array"!=o.type(e))return console.log("建構名稱須要指定"),!1;o.each(e,function(e,o){t.fun_struct[o]=r})}return!0}}),t},this.put_storage=function(t,e){if(null!=t){if(r[t])return console.log("倉儲名稱『"+t+"』重複。"),!1;r[t]=e}},this.main=function(t){try{if(!o.vmodel.api.isallow_jqver(!1))throw o.vmodel.api.isallow_jqver(!0);o.vmodel.api.check_input_param({selector:t.selector,model_name:t.model,isautoload:t.isautoload,method:t.method});var r=o.vmodel.api.vmodel_param_match(t.selector,t.model,t.isautoload,t.method),n=(r[0],r[1]),a=r[2],i=r[3],u=(i=e.ext_expend(i,n),o.vmodel.api.get_autoload_funame(i));return e.define_autoload_struct(i,u),e.put_storage(n,i),!0===a&&!1===o.vmodel.api.is_trigger_autoload(i,u)&&e.msg_error("is_trigger_autoload","發生錯誤"),this}catch(t){return console.log(t),!1}},e.main(t)},o.fn.vmodel=function(t){if("object"!==o.type(t))return console.log("參數型態需要是 object"),!1;o.vmodel.create(t)}},function(t,e,o){"use strict";o.r(e),o(0),o(2)},function(t,e){jQuery}]);
//# sourceMappingURL=jquery.vmodel.min.js.map
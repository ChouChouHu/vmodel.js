!function(t){var e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e){jQuery.vmodel={_version:"1.6.2",_storage:{}}},function(t,e,r){"use strict";r.r(e),r(0),r(2),r(3),r(8),r(7),r(6),r(5),r(9),r(4)},function(t,e){var r;(r=jQuery).vmodel.api=new function(){this.remove_sign=function(t){return"--"==t.substring(0,2)?t.substring(2):t},this.isallow_jqver=function(t){return 1==t?"Vmodel.js "+r.vmodel.version()+" 須要使用大於 jQuery 3.0.0 的版本":3==jQuery.fn.jquery.charAt(0)},this.check_input_param=function(t){if(!t.selector)throw"須要指定選擇器";if(!t.model_name)throw"須要替模型命名";if(void 0===t.isautoload)throw"須要指定是否啟用";if(!t.method)throw"須要指定方法"},this.vmodel_param_match=function(t,e,o,n){return[t,this.remove_sign(e),o,"object"===r.type(n)?n:new n]},this.obj_sort=function(t){var e=[],o=0;r.each(t,function(t,r){e[o++]=t}),e.sort();var n={};return r.each(e,function(e,r){n[r]=t[r]}),n},this.each_autoload=function(t,e){if(!t)return!1;var o={status:!0,function_name:null};return r.each(t,function(t,n){return"function"==r.type(e[n])?(e[n](),!0):(o={status:!1,function_name:n},!1)}),o},this.is_trigger_autoload=function(t,e){var o={status:!1,message:null};try{if(!e)throw"須要指定方法名稱陣列";if("array"!=r.type(e))throw"autoload 必須要是陣列";if(!0===(o=r.vmodel.api.each_autoload(e,t)).status)return!0;throw"找不到可以自動讀取的方法 "+o.function_name+"()"}catch(t){o={status:!1,message:t}}return o},this.get_autoload_funame=function(t){var e=[],o=r.type(t.autoload),n={status:!0,message:null,data:null};try{if("array"==o)e=t.autoload;else{if("function"!=o)throw"中 autoload 須要是陣列或 function。";if(res=t.autoload(),"array"!=r.type(res))throw"中 autoload 最終需要得到的型態務必是 Array。";e=res}n.data=e}catch(t){n.status=!1,n.message=t}return n}}},function(t,e){$.vmodel.version=function(){return $.vmodel._version}},function(t,e){var r;(r=jQuery).fn.vmodel=function(t){if("object"!==r.type(t))return console.log("參數型態需要是 object"),!1;r.vmodel.create(t)}},function(t,e){var r;(r=jQuery).vmodel.delete=function(t){return t||""==t?r.vmodel._storage[t]&&delete r.vmodel._storage[t]:r.vmodel._storage={},this}},function(t,e){var r;(r=jQuery).vmodel.get=function(t,e,o){var n=this;this.chk_trigger_callback=function(t){var e=!0;return r.each(t.fun_struct,function(t,r){if(0==r)return e=!1,!1}),0!=e},this.display_attr=function(t,e){var o=new Date,n=[{vname:t,status:!0,timestamp:Date.parse(o)+"."+o.getMilliseconds()}],a=e.root.attr("data-vmodel-history");if(a){var u=r.parseJSON(a);u.push(n[0]),n=u}var i=JSON.stringify(n);e.root.attr("data-vmodel-history",i)},this.param_match=function(t,e,o){var n=[],a=r.type(t);return t?"string"==a&&(n=[t,e,o]):n=[t,null,null],n};var a=n.param_match(t,e,o),u=(t=a[0],a[1]),i=a[2];if(a=e=o=null,!t)return r.vmodel.api.obj_sort(r.vmodel._storage);var s=r.vmodel._storage[t];if(!s)return console.log("呼叫的倉儲名稱 "+t+" 不存在。"),!1;if("boolean"==r.type(u)&&1==u){var l=r.vmodel.api.get_autoload_funame(s).data,c=(r.vmodel.api.is_trigger_autoload(s,l),r.type(i));if("function"==c||"boolean"==c&&1==i){"function"==c&&(s.vmodel_get_callback=function(){i(s)});var f=setInterval(function(){if(1==n.chk_trigger_callback(s)){if(clearInterval(f),n.display_attr(t,s),"boolean"==c)return!0;s.vmodel_get_callback()}},20);return!0}}return r.vmodel._storage[t]}},function(t,e){var r;(r=jQuery).vmodel.history=function(t){var e=!1,o=r.vmodel.get(t).root.attr("data-vmodel-history");if(!o)return!1;var n=r.parseJSON(o);return r.each(n,function(r,o){return o.vname!=t||(e=o,!1)}),e}},function(t,e){var r;(r=jQuery).vmodel.end=function(t,e){this.param_match=function(t,e){var o=[];if("function"==r.type(t))o=[r.vmodel.get(),t];else{var n={};r.each(t,function(t,e){n[e]=r.vmodel.get(e)}),o=[n,e]}return o};var o=this.param_match(t,e),n=o[0],a=o[1];t=e=null;var u=setInterval(function(){var t=!0;r.each(n,function(e,o){if(0==r.vmodel.history(o.vname))return t=!1,!0;t=!0}),t&&(a(n),clearInterval(u))},0)}},function(t,e){var r;(r=jQuery).vmodel.create=function(t){var e=this,o=t.selector;return this.msg_error=function(e){console.log("錯誤！"+t.model+" "+e)},this.define_autoload_struct=function(t,e){r.each(e,function(e,r){t.fun_struct[r]=!1})},this.ext_expend=function(t,n){var a=null!=n?n:null;return r.extend(t,{vname:a,selector:o,root:r(o),fun_struct:{},struct:function(o,n){if("boolean"==r.type(n)||n||(n=!0),"string"==r.type(o)){if("boolean"!=r.type(t.fun_struct[o]))return e.msg_error("找不到名稱為 "+o+"的建構狀態"),!1;t.fun_struct[o]=n}else{if("array"!=r.type(o))return e.msg_error("建構名稱須要指定"),!1;r.each(o,function(e,r){t.fun_struct[r]=n})}return!0}}),t},this.put_storage=function(t,o){if(null!=t){if(r.vmodel._storage[t])return e.msg_error("倉儲名稱已被使用。"),!1;r.vmodel._storage[t]=o}return!0},this.main=function(t){if(!r.vmodel.api.isallow_jqver(!1))throw r.vmodel.api.isallow_jqver(!0);r.vmodel.api.check_input_param({selector:t.selector,model_name:t.model,isautoload:t.isautoload,method:t.method});var o=r.vmodel.api.vmodel_param_match(t.selector,t.model,t.isautoload,t.method),n=(o[0],o[1]),a=o[2],u=o[3];if(u=e.ext_expend(u,n),!1===(i=r.vmodel.api.get_autoload_funame(u)).status)return e.msg_error(i.message),!1;var i,s=i.data;return e.define_autoload_struct(u,s),!1!==(i=e.put_storage(n,u))&&(!0===a&&!1===(i=r.vmodel.api.is_trigger_autoload(u,s)).status?(e.msg_error(i.message),!1):this)},e.main(t)}}]);
//# sourceMappingURL=jquery.vmodel.min.js.map
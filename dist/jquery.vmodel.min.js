!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=9)}([function(t,e){var r;(r=jQuery).fn.vmodel=function(t){if("object"!==r.type(t))return console.log("參數型態需要是 object"),!1;r.vmodel.create(t)}},function(t,e){var r;(r=jQuery).vmodel.create=function(t){var e=this,n=t.selector;return this.msg_error=function(e){console.log("錯誤！"+t.model+" "+e)},this.define_autoload_struct=function(t,e){r.each(e,function(e,r){t.fun_struct[r]=!1})},this.ext_expend=function(t,o){var a=null!=o?o:null;return r.extend(t,{vname:a,selector:n,root:r(n),fun_struct:{},struct:function(n,o){if("boolean"==r.type(o)||o||(o=!0),"string"==r.type(n)){if("boolean"!=r.type(t.fun_struct[n]))return e.msg_error("找不到名稱為 "+n+"的建構狀態"),!1;t.fun_struct[n]=o}else{if("array"!=r.type(n))return e.msg_error("建構名稱須要指定"),!1;r.each(n,function(e,r){t.fun_struct[r]=o})}return!0}}),t},this.put_storage=function(t,n){if(null!=t){if(r.vmodel._storage[t])return e.msg_error("倉儲名稱已被使用。"),!1;r.vmodel._storage[t]=n}return!0},this.main=function(t){if(!r.vmodel.api.isallow_jqver(!1))throw r.vmodel.api.isallow_jqver(!0);r.vmodel.api.check_input_param({selector:t.selector,model_name:t.model,isautoload:t.isautoload,method:t.method});var n=r.vmodel.api.vmodel_param_match(t.selector,t.model,t.isautoload,t.method),o=(n[0],n[1]),a=n[2],u=n[3];if(u=e.ext_expend(u,o),!1===(i=r.vmodel.api.get_autoload_funame(u)).status)return e.msg_error(i.message),!1;var i,s=i.data;return e.define_autoload_struct(u,s),!1!==(i=e.put_storage(o,u))&&(!0===a&&!1===(i=r.vmodel.api.is_trigger_autoload(u,s)).status?(e.msg_error(i.message),!1):this)},e.main(t)}},function(t,e){var r;(r=jQuery).vmodel.delete=function(t){return t||""==t?r.vmodel._storage[t]&&delete r.vmodel._storage[t]:r.vmodel._storage={},this}},function(t,e){var r;(r=jQuery).vmodel.get=function(t,e,n){var o=this;this.is_trigger_callback=function(t){var e=!0;return r.each(t.fun_struct,function(t,r){if(0==r)return e=!1,!1}),0!=e},this.push_endbox=function(t){var e=new Date,n=[{vname:t,status:!0,timestamp:Date.parse(e)+"."+e.getMilliseconds()}],o=r.vmodel.api.endbox("get");return r(o).length>0&&(o.push(n[0]),n=o),r.vmodel.api.endbox("set",n),n},this.set_display_attr=function(t,e){var r=JSON.stringify(e);t.root.attr("data-vmodel-history",r)},this.param_match=function(t,e,n){var o=[],a=r.type(t);return t?"string"==a&&(o=[t,e,n]):o=[t,null,null],o};var a=o.param_match(t,e,n),u=(t=a[0],a[1]),i=a[2];if(a=e=n=null,!t)return r.vmodel.api.obj_sort(r.vmodel._storage);var s=r.vmodel._storage[t];if(!s)return console.log("呼叫的倉儲名稱 "+t+" 不存在。"),!1;if("boolean"==r.type(u)&&1==u){var l=r.vmodel.api.get_autoload_funame(s).data,c=(r.vmodel.api.is_trigger_autoload(s,l),r.type(i));if("function"==c||"boolean"==c&&1==i){"function"==c&&(s.vmodel_get_callback=function(){i.call(this,s)});var f=setInterval(function(){if(!1===o.is_trigger_callback(s))return!0;clearInterval(f);var e=o.push_endbox(t);if(o.set_display_attr(s,e),"boolean"==c)return!0;s.vmodel_get_callback()},0);return!0}}return r.vmodel._storage[t]}},function(t,e){var r;(r=jQuery).vmodel.history=function(t){var e={status:!1,data:null},n=(r.vmodel.get(t),r.vmodel.api.endbox("get"));return 0===r(n).length?e:(r.each(n,function(r,n){return n.vname!=t||(e.status=!0,e.data=n,!1)}),e)}},function(t,e){var r;(r=jQuery).vmodel.end=function(t,e){this.param_match=function(t,e){var n=[];if("function"==r.type(t))n=[r.vmodel.get(),t];else{var o={};r.each(t,function(t,e){o[e]=r.vmodel.get(e)}),n=[o,e]}return n};var n=this.param_match(t,e),o=n[0],a=n[1];t=e=null;var u=setInterval(function(){var t=!0;r.each(o,function(e,n){if(!1===r.vmodel.history(n.vname).status)return t=!1,!1;t=!0}),t&&(a(o),clearInterval(u))},20)}},function(t,e){$.vmodel.version=function(){return $.vmodel._version}},function(t,e){var r;(r=jQuery).vmodel.api=new function(){var t=[];this.endbox=function(e,r){if("set"==e)t=r;else if("get"==e)return t},this.remove_sign=function(t){return"--"==t.substring(0,2)?t.substring(2):t},this.isallow_jqver=function(t){return 1==t?"Vmodel.js "+r.vmodel.version()+" 須要使用大於 jQuery 3.0.0 的版本":3==jQuery.fn.jquery.charAt(0)},this.check_input_param=function(t){if(!t.selector)throw"須要指定選擇器";if(!t.model_name)throw"須要替模型命名";if(void 0===t.isautoload)throw"須要指定是否啟用";if(!t.method)throw"須要指定方法"},this.vmodel_param_match=function(t,e,n,o){return[t,this.remove_sign(e),n,"object"===r.type(o)?o:new o]},this.obj_sort=function(t){var e=[],n=0;r.each(t,function(t,r){e[n++]=t}),e.sort();var o={};return r.each(e,function(e,r){o[r]=t[r]}),o},this.each_autoload=function(t,e){if(!t)return!1;var n={status:!0,function_name:null};return r.each(t,function(t,o){return"function"==r.type(e[o])?(e[o](),!0):(n={status:!1,function_name:o},!1)}),n},this.is_trigger_autoload=function(t,e){var n={status:!1,message:null};try{if(!e)throw"須要指定方法名稱陣列";if("array"!=r.type(e))throw"autoload 必須要是陣列";if(!0===(n=r.vmodel.api.each_autoload(e,t)).status)return!0;throw"找不到可以自動讀取的方法 "+n.function_name+"()"}catch(t){n={status:!1,message:t}}return n},this.get_autoload_funame=function(t){var e=[],n=r.type(t.autoload),o={status:!0,message:null,data:null};try{if("array"==n)e=t.autoload;else{if("function"!=n)throw"中 autoload 須要是陣列或 function。";if(res=t.autoload(),"array"!=r.type(res))throw"中 autoload 最終需要得到的型態務必是 Array。";e=res}o.data=e}catch(t){o.status=!1,o.message=t}return o}}},function(t,e){jQuery.vmodel={_version:"1.7.6",_storage:{}}},function(t,e,r){"use strict";r.r(e),r(8),r(7),r(6),r(5),r(4),r(3),r(2),r(1),r(0)}]);
//# sourceMappingURL=jquery.vmodel.min.js.map